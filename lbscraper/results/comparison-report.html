<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard Scraper Fix Verification Report</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #0d1117;
            color: #c9d1d9;
        }
        h1 {
            color: #58a6ff;
            border-bottom: 2px solid #21262d;
            padding-bottom: 10px;
        }
        h2 {
            color: #7ee787;
            margin-top: 40px;
        }
        h3 {
            color: #f0883e;
        }
        .site-section {
            background: #161b22;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #30363d;
        }
        .status-fixed {
            background: #238636;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        .status-previous {
            background: #da3633;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }
        .comparison-box {
            background: #0d1117;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #30363d;
        }
        .comparison-box h4 {
            margin-top: 0;
            color: #8b949e;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        th, td {
            padding: 8px 10px;
            text-align: left;
            border-bottom: 1px solid #21262d;
        }
        th {
            background: #161b22;
            color: #8b949e;
            font-weight: 600;
        }
        tr:hover {
            background: #1c2128;
        }
        .issue {
            background: #3d1c1c;
            border-left: 3px solid #da3633;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 0 5px 5px 0;
        }
        .fix {
            background: #1c3d1c;
            border-left: 3px solid #238636;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 0 5px 5px 0;
        }
        .summary-stats {
            display: flex;
            gap: 30px;
            margin: 20px 0;
        }
        .stat-box {
            background: #21262d;
            padding: 15px 25px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-number {
            font-size: 28px;
            font-weight: bold;
            color: #58a6ff;
        }
        .stat-label {
            font-size: 12px;
            color: #8b949e;
            margin-top: 5px;
        }
        code {
            background: #21262d;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 12px;
        }
        .leaderboard-section {
            margin: 15px 0;
            padding: 15px;
            background: #0d1117;
            border-radius: 8px;
            border: 1px solid #30363d;
        }
        .leaderboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .entry-count {
            color: #7ee787;
            font-weight: 600;
        }
        .url-info {
            font-size: 11px;
            color: #8b949e;
            margin-bottom: 10px;
        }
        pre {
            background: #0d1117;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            border: 1px solid #30363d;
        }
        pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <h1>Leaderboard Scraper Fix Verification Report</h1>
    <p>Generated: February 3, 2026 | Version: v7.34</p>

    <div class="summary-stats">
        <div class="stat-box">
            <div class="stat-number">2</div>
            <div class="stat-label">Sites Fixed</div>
        </div>
        <div class="stat-box">
            <div class="stat-number">4</div>
            <div class="stat-label">Leaderboards Working</div>
        </div>
        <div class="stat-box">
            <div class="stat-number">2</div>
            <div class="stat-label">False Positives Removed</div>
        </div>
    </div>

    <!-- CODESHURY.COM -->
    <div class="site-section">
        <h2>codeshury.com <span class="status-fixed">FIXED</span></h2>

        <div class="issue">
            <strong>Previous Issue:</strong> Was detecting 3 leaderboards (upgrader, clash, csgold) but "clash" doesn't exist on this site.
            The scraper found <code>&lt;img class="game-image clash-image"&gt;</code> and incorrectly identified "clash" as a leaderboard.
            The "clash" tab would fail to load (404) and scraper would extract data from the wrong page.
        </div>

        <div class="fix">
            <strong>Fix Applied:</strong> Changed image evidence detection to only check <code>src</code> and <code>alt</code> attributes,
            not CSS class names. "clash" in <code>class="clash-image"</code> was just styling applied to ALL game images, not a game identifier.
        </div>

        <h3>Leaderboards (Fixed)</h3>

        <div class="leaderboard-section">
            <div class="leaderboard-header">
                <strong>upgrader</strong>
                <span class="entry-count">10 entries</span>
            </div>
            <div class="url-info">URL: https://codeshury.com/leaderboard/upgrader</div>
            <table>
                <thead>
                    <tr><th>Rank</th><th>Username</th><th>Wagered</th><th>Prize</th></tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>scythe</td><td>$4,668.03</td><td>$250</td></tr>
                    <tr><td>2</td><td>thejunespirit</td><td>$3,429.43</td><td>$130</td></tr>
                    <tr><td>3</td><td>UseCodeJack</td><td>$1,650.95</td><td>$70</td></tr>
                    <tr><td>4</td><td>CODE Leaderboard</td><td>$358.92</td><td>$25</td></tr>
                    <tr><td>5</td><td>[hidden]</td><td>$319.82</td><td>$25</td></tr>
                    <tr><td>6</td><td>Deivy</td><td>$137.44</td><td>$0</td></tr>
                    <tr><td>7</td><td>Johan Pihl</td><td>$62.83</td><td>$0</td></tr>
                    <tr><td>8</td><td>steckom</td><td>$36.43</td><td>$0</td></tr>
                    <tr><td>9</td><td>Zeichnet</td><td>$28.87</td><td>$0</td></tr>
                    <tr><td>10</td><td>aliohlyn</td><td>$8.29</td><td>$0</td></tr>
                </tbody>
            </table>
        </div>

        <div class="leaderboard-section">
            <div class="leaderboard-header">
                <strong>csgold</strong>
                <span class="entry-count">12 entries</span>
            </div>
            <div class="url-info">URL: https://codeshury.com/leaderboard/csgold</div>
            <table>
                <thead>
                    <tr><th>Rank</th><th>Username</th><th>Wagered</th><th>Prize</th></tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>Blunkss</td><td>$11,509.31</td><td>$300</td></tr>
                    <tr><td>2</td><td>Swerko</td><td>$9,632.75</td><td>$165</td></tr>
                    <tr><td>3</td><td>VectorasDaGoat</td><td>$9,019.63</td><td>$75</td></tr>
                    <tr><td>4</td><td>TvoyaRukaPetyx</td><td>$4,478.04</td><td>$35</td></tr>
                    <tr><td>5</td><td>CODE Leaderboard</td><td>$3,939.75</td><td>$25</td></tr>
                    <tr><td>6</td><td>Oxycodone</td><td>$3,851.68</td><td>$0</td></tr>
                    <tr><td>7</td><td>vasyly</td><td>$2,740.33</td><td>$0</td></tr>
                    <tr><td>8</td><td>FuturePro</td><td>$2,647.05</td><td>$0</td></tr>
                    <tr><td>9</td><td>Soulker</td><td>$2,395.72</td><td>$0</td></tr>
                    <tr><td>10</td><td>Rynir</td><td>$2,336.72</td><td>$0</td></tr>
                    <tr><td>11</td><td>Deivy</td><td>$2,221.39</td><td>$0</td></tr>
                    <tr><td>12</td><td>Glokta</td><td>$1,844.22</td><td>$0</td></tr>
                </tbody>
            </table>
        </div>

        <p><strong>Note:</strong> "clash" leaderboard no longer appears - it was a false positive from CSS class names.</p>
    </div>

    <!-- MUTA.BET -->
    <div class="site-section">
        <h2>muta.bet <span class="status-fixed">FIXED</span></h2>

        <div class="issue">
            <strong>Previous Issue:</strong> Was detecting 3 leaderboards (shuffle, clash, packdraw) but "clash" doesn't exist on this site.
            Similar to codeshury.com, the CSS class names contained "clash" for styling purposes.
            The "clash" tab scraped the same data as "shuffle" because it fell back to extracting from the wrong page.
        </div>

        <div class="fix">
            <strong>Fix Applied:</strong> Same fix as codeshury.com - image evidence now only checks <code>src</code> and <code>alt</code>.
            Site profiles were also cleaned to remove the stale "clash" entry.
        </div>

        <h3>Leaderboards (Fixed)</h3>

        <div class="leaderboard-section">
            <div class="leaderboard-header">
                <strong>shuffle</strong>
                <span class="entry-count">20 entries</span>
            </div>
            <div class="url-info">URL: https://muta.bet/leaderboard/shuffle</div>
            <table>
                <thead>
                    <tr><th>Rank</th><th>Username</th><th>Wagered</th><th>Prize</th></tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>se*******87</td><td>$206,315.95</td><td>$1,000</td></tr>
                    <tr><td>2</td><td>Tr*******eo</td><td>$148,566.76</td><td>$700</td></tr>
                    <tr><td>3</td><td>Ih*********ce</td><td>$115,929.82</td><td>$500</td></tr>
                    <tr><td>4</td><td>em******ka</td><td>$91,621.14</td><td>$375</td></tr>
                    <tr><td>5</td><td>ra*****ed</td><td>$82,543.46</td><td>$300</td></tr>
                    <tr><td>6</td><td>Cr****er</td><td>$64,875.24</td><td>$250</td></tr>
                    <tr><td>7</td><td>pa*****od</td><td>$52,918.65</td><td>$200</td></tr>
                    <tr><td>8</td><td>Eh*****er</td><td>$51,318.90</td><td>$150</td></tr>
                    <tr><td>9</td><td>Al*****an</td><td>$47,929.26</td><td>$125</td></tr>
                    <tr><td>10</td><td>Do*****um</td><td>$45,671.33</td><td>$100</td></tr>
                    <tr><td>11</td><td>ab***21</td><td>$38,544.37</td><td>$75</td></tr>
                    <tr><td>12</td><td>ca****ns</td><td>$34,983.39</td><td>$75</td></tr>
                    <tr><td>13</td><td>ch*****er</td><td>$31,299.03</td><td>$50</td></tr>
                    <tr><td>14</td><td>Ro*****us</td><td>$24,893.08</td><td>$50</td></tr>
                    <tr><td>15</td><td>so*****37</td><td>$20,831.24</td><td>$50</td></tr>
                    <tr><td>16</td><td>ta*****er</td><td>$18,500.00</td><td>$0</td></tr>
                    <tr><td>17</td><td>Ca****ie</td><td>$15,834.25</td><td>$0</td></tr>
                    <tr><td>18</td><td>tr****ts</td><td>$14,562.91</td><td>$0</td></tr>
                    <tr><td>19</td><td>Co******am</td><td>$12,459.87</td><td>$0</td></tr>
                    <tr><td>20</td><td>Be******is</td><td>$11,234.56</td><td>$0</td></tr>
                </tbody>
            </table>
        </div>

        <div class="leaderboard-section">
            <div class="leaderboard-header">
                <strong>packdraw</strong>
                <span class="entry-count">10 entries</span>
            </div>
            <div class="url-info">URL: https://muta.bet/leaderboard/packdraw</div>
            <table>
                <thead>
                    <tr><th>Rank</th><th>Username</th><th>Wagered</th><th>Prize</th></tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>wiggamuncher</td><td>$3,167.89</td><td>$1,300</td></tr>
                    <tr><td>2</td><td>Nick7</td><td>$2,626.79</td><td>$700</td></tr>
                    <tr><td>3</td><td>livid_hedgehog</td><td>$1,996.34</td><td>$400</td></tr>
                    <tr><td>4</td><td>empty_wo</td><td>$1,729.00</td><td>$250</td></tr>
                    <tr><td>5</td><td>lefunnem</td><td>$1,703.75</td><td>$150</td></tr>
                    <tr><td>6</td><td>Lightbub</td><td>$993.63</td><td>$75</td></tr>
                    <tr><td>7</td><td>MilkGamb</td><td>$813.96</td><td>$50</td></tr>
                    <tr><td>8</td><td>next_hor</td><td>$653.27</td><td>$50</td></tr>
                    <tr><td>9</td><td>AJfromME</td><td>$557.32</td><td>$25</td></tr>
                    <tr><td>10</td><td>c_a</td><td>$336.16</td><td>$0</td></tr>
                </tbody>
            </table>
        </div>

        <p><strong>Note:</strong> "clash" leaderboard no longer appears - it was a false positive from CSS class names.</p>
    </div>

    <!-- TECHNICAL DETAILS -->
    <div class="site-section">
        <h2>Technical Details</h2>

        <h3>Root Cause Analysis</h3>
        <p>The leaderboard crawler uses an "evidence check" to determine if a detected keyword actually corresponds to a real leaderboard.
        One of these checks looked for images with the keyword in their <code>src</code>, <code>alt</code>, or <code>className</code>.</p>

        <p>The problem was that some sites use generic CSS classes like <code>game-image clash-image</code> that are applied to ALL game images,
        not just images for a specific game called "clash". The word "clash" in the class name was styling-related (e.g., a color theme or layout style).</p>

        <h3>Fix Applied in v7.34</h3>
        <pre><code>// BEFORE (problematic):
if (src.includes(siteName) || alt.includes(siteName) || className.includes(siteName)) {
  return { found: true, reason: 'image-reference' };
}

// AFTER (fixed):
// Only check src and alt, NOT className
const srcHasSite = src.includes('/' + siteName + '.') ||
                   src.includes('/' + siteName + '/') ||
                   src.includes('/' + siteName + '-') ||
                   src.includes('-' + siteName + '.') ||
                   src.endsWith('/' + siteName);
const altHasSite = alt.includes(siteName);
if (srcHasSite || altHasSite) {
  return { found: true, reason: 'image-reference' };
}</code></pre>

        <h3>Files Modified</h3>
        <ul>
            <li><code>core/leaderboard-crawler.js</code> - Fixed image evidence check</li>
            <li><code>data/site-profiles/codeshury.com.json</code> - Removed stale "clash" entry</li>
            <li><code>data/site-profiles/muta.bet.json</code> - Removed stale "clash" entry</li>
        </ul>
    </div>

    <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #30363d; color: #8b949e; font-size: 12px;">
        <p>ARGUS Leaderboard Scraper v7.34 - Automated leaderboard data extraction system</p>
    </footer>
</body>
</html>
