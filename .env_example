# Database (PostgreSQL required for Prisma)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
# Local example: postgresql://postgres:postgres@localhost:5432/leaderboard
# Create the database first: createdb leaderboard (or via pgAdmin)
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/leaderboard"

# JWT
JWT_ACCESS_SECRET=""
JWT_REFRESH_SECRET=""
JWT_ACCESS_EXPIRY="15m"
JWT_REFRESH_EXPIRY="7d"

# 2FA Encryption
TWO_FACTOR_ENCRYPTION_KEY=""

# Email (SMTP)
SMTP_HOST="sandbox.smtp.mailtrap.io"
SMTP_PORT=2525
SMTP_SECURE=false
SMTP_USER="user"
SMTP_PASS="password"
EMAIL_FROM="noreply@yourdomain.com"

# App
APP_NAME="Analytics"
FRONTEND_URL="http://localhost:3000"
BACKEND_URL="http://localhost:4000"
NODE_ENV="development"
PORT=4000

# Rate Limiting
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# Security
BCRYPT_ROUNDS=12
MAX_LOGIN_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION=900000

# Token Expiry (in milliseconds)
EMAIL_VERIFICATION_EXPIRY=86400000
PASSWORD_RESET_EXPIRY=3600000
INVITATION_EXPIRY=86400000

# ============================================================================
# SCRAPER (Phase 2)
# ============================================================================

# Anthropic API - REQUIRED for AI extraction
# Get your key from https://console.anthropic.com/
ANTHROPIC_API_KEY=""

# Master toggle for LLM Teacher Mode
# Set to "true" to enable, "false" to disable (default: disabled)
LLM_TEACHER_ENABLED=true

# Verification settings
LLM_MAX_ATTEMPTS=3          # Max LLM attempts before flagging for manual review
LLM_MIN_CONFIDENCE=80       # Minimum confidence to consider verified

# Cost guardrails (prevent runaway spending)
LLM_MAX_TOKENS_PER_CALL=8000      # Max output tokens per LLM call
LLM_MAX_CALLS_PER_SITE=5          # Max LLM calls per site per session
LLM_MAX_CALLS_PER_DAY=100         # Max LLM calls per day (across all sites)
LLM_MONTHLY_BUDGET_USD=50.00      # Monthly spending limit in USD

# 2Captcha API - Get your key from https://2captcha.com/enterpage
# Pricing: ~$2.99 per 1000 solved captchas
TWOCAPTCHA_API_KEY=""


# Redis (for BullMQ job queue)
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_PASSWORD=""

# Cloudflare R2 (for screenshot storage)
R2_ACCOUNT_ID=""
R2_ACCESS_KEY_ID=""
R2_SECRET_ACCESS_KEY=""
R2_BUCKET_NAME="leaderboard-screenshots"

# Scraper Settings
SCRAPER_CONCURRENCY=5
SCRAPER_REFRESH_INTERVAL=900
SCRAPER_SKIP_MANUAL_BYPASS=false

# JSON Debug Logging
# These are fallback values if database config is unavailable
SCRAPER_JSON_LOGGING=true
SCRAPER_JSON_AUTO_CLEANUP=true
SCRAPER_JSON_RETENTION_HOURS=48

# Browser Mode
# Set to 'false' to show browser window for debugging
SCRAPER_HEADLESS=true

# ============================================================================
# LLM TEACHER MODE (Optional - for AI-assisted extraction learning)
# ============================================================================

# Enable/disable Teacher Mode (default: false)
LLM_TEACHER_ENABLED=false

# LLM Call Limits
LLM_MAX_ATTEMPTS=3
LLM_MIN_CONFIDENCE=80
LLM_MAX_TOKENS_PER_CALL=8000
LLM_MAX_CALLS_PER_SITE=5
LLM_MAX_CALLS_PER_DAY=100

# Monthly budget cap in USD (prevents runaway costs)
LLM_MONTHLY_BUDGET_USD=50.00
